let sirscIteratorLastAction = '';const sirscIteratorInit = (element) =>{if (element){const button = document.getElementById(element);if (button){button.dataset.processing = 0;button.dataset.stopped = 0;button.classList.add('disabled');sirscIteratorActivateElement(element,'start');sirscIteratorActivateElement(element,'stop');sirscIteratorResetElement(element,'resume');sirscIteratorActivateElement(element,'cancel');sirscIteratorResetElement(element,'finish');}}};const sirscIteratorResetElement = (element,action) =>{const item = document.getElementById(element + '-' + action);if (item){if ('start' === action){item.classList.remove('disabled');item.classList.remove('processing');}else{item.classList.add('hidden');}}};const sirscIteratorActivateElement = (element,action) =>{const item = document.getElementById(element + '-' + action);if (item){if ('start' === action){item.classList.add('disabled');item.classList.add('processing');}else{item.classList.remove('hidden');}}};const sirscIteratorReset = (element) =>{if (element){const button = document.getElementById(element);if (button){button.dataset.processing = 0;button.dataset.stopped = 1;button.classList.remove('disabled');sirscIteratorResetElement(element,'start');sirscIteratorResetElement(element,'stop');sirscIteratorResetElement(element,'resume');sirscIteratorResetElement(element,'cancel');sirscIteratorResetElement(element,'finish');}}};const sirscIteratorStop = (element) =>{if (element){let button = document.getElementById(element);if (button){button.dataset.processing = 1;button.dataset.stopped = 1;const buttonStart = document.getElementById(element + '-start');buttonStart.classList.remove('processing');sirscIteratorActivateElement(element,'resume');sirscIteratorResetElement(element,'stop');sirscIteratorResetElement(element,'finish');button = document.getElementById(element);}}};const sirscIteratorContinue = (element) =>{if (element){const button = document.getElementById(element);if (button){if (button.dataset.stopped === 1 ||button.dataset.stopped === '1'){return false;}return true;}}return false;};function sirscIterator(element,action,callback){sirscIteratorLastAction = action;switch (action){case 'start':case 'resume':sirscIteratorInit(element,callback);break;case 'reset':case 'cancel':sirscIteratorReset(element);return;break;case 'stop':sirscIteratorStop(element,callback);break;case 'finish':sirscIteratorReset(element);break;case 'continue':default:break;}if (sirscIteratorContinue(element,callback)){sirscResolve(callback);}}const sirscIteratorRemoveElements = (elem) =>{if (typeof elem !== 'undefined'){if (elem.length>1){for (let i = 0;i < elem.length;i++){if (elem[ i ].parentNode){elem[ i ].parentNode.removeChild(elem[ i ]);}}}else{if (elem[ 0 ]){if (elem[ 0 ].parentNode){elem[ 0 ].parentNode.removeChild(elem[ 0 ]);}}else{if (elem.parentNode){elem.parentNode.removeChild(elem);}}}}};const sirscIteratorAssessCallback = () =>{const targetCallback = document.getElementById('sirsc-data-callback');if (targetCallback){sirscResolve(targetCallback.dataset.response);sirscIteratorRemoveElements(targetCallback);}const targetCallbackDelay = document.getElementById('sirsc-data-callback-delay');if (targetCallbackDelay){setTimeout(function (){sirscResolve(targetCallbackDelay.dataset.response);sirscIteratorRemoveElements(targetCallbackDelay);},sirscIteratorSettings.delay);}};const sirscIteratorAssessMessage = () =>{const targetMessage = document.querySelectorAll('.sirsc-response-message');if (targetMessage){setTimeout(function (){sirscIteratorRemoveElements(targetMessage);},sirscIteratorSettings.delay);}};function sirscIteratorGet(url,target,extraCall = null){const targetEl = document.getElementById(target);targetEl.classList.add('processing');fetch(sirscIteratorSettings.ajaxurl + '?' +url +'&iterator=' +sirscIteratorLastAction +'&verify=' + sirscIteratorSettings.verify,{method:'GET',mode:'cors',cache:'no-cache',credentials:'same-origin',}).then((response) =>{return response.text();}).then((data) =>{targetEl.textContent = data;targetEl.innerHTML = data;targetEl.classList.remove('processing');sirscIteratorAssessMessage();sirscIteratorAssessCallback();if (extraCall){sirscResolve(extraCall);}}).catch(() =>{sirscIteratorAssessCallback();sirscIteratorAssessMessage();});}function sirscIterators(){const iterators = document.querySelectorAll('.sirsc-iterator-wrap');if (iterators){for (let i = 0;i < iterators.length;i++){iterators[ i ].addEventListener('click',function (event){event.preventDefault();event.stopPropagation();let action = '';if (event.target.id.endsWith('-start')){action = 'start';}else if (event.target.id.endsWith('-stop')){action = 'stop';}else if (event.target.id.endsWith('-resume')){action = 'resume';}else if (event.target.id.endsWith('-cancel')){action = 'cancel';}else if (event.target.id.endsWith('-finish')){action = 'finish';}iterators[ i ].dataset.action = action;sirscIterator(iterators[ i ].id,action,iterators[ i ].dataset.callback);});}}}setTimeout(function (){sirscIterators();},1500);